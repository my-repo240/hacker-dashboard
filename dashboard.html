<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>CRM Dashboard</title>
  <style>
    body { font-family: Arial, sans-serif; margin:0; background:#f4f4f4;}
    .sidebar { width:220px; background:#fff; position:fixed; top:0; left:0; height:100vh; border-right:1px solid #ccc; padding-top:20px;}
    .sidebar button { background:#1976d2; color:#fff; padding:10px; margin:10px; width:180px; border:none; border-radius:4px; cursor:pointer;}
    .sidebar ul { list-style:none; padding:0;}
    .sidebar ul li { margin:20px;}
    .sidebar ul li a { text-decoration:none; color:#1976d2; font-weight:bold;}
    .main { margin-left:220px; padding:20px;}
    table { border-collapse:collapse; width:100%;}
    th, td { border:1px solid #ddd; padding:8px; text-align:left;}
    th { background:#1976d2; color:#fff;}
  </style>
  <!-- Firebase -->
  <script type="module">
    // Firebase Imports
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
    import { getFirestore, collection, getDocs } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyDaZjc53y1us3aFL9yfExSpYVvYSZt0aeA",
      authDomain: "ai-logistics-company.firebaseapp.com",
      projectId: "ai-logistics-company",
      storageBucket: "ai-logistics-company.appspot.com",
      messagingSenderId: "971305955081",
      appId: "1:971305955081:web:4f422c8a9b9ebbd868add8",
      measurementId: "G-3R5N3WW6X1"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);

    window.onload = async () => {
      const tasksCol = collection(db, "tasks");
      const taskSnapshot = await getDocs(tasksCol);
      const taskList = taskSnapshot.docs.map(doc => doc.data());

      const tbody = document.getElementById("taskTableBody");
      tbody.innerHTML = "";
      let count = 1;
      taskList.forEach(task => {
        const tr = document.createElement("tr");
        tr.innerHTML = `
          <td>${count++}</td>
          <td>${task.name || "N/A"}</td>
          <td>${task.status || "N/A"}</td>
          <td>${task.start || "N/A"}</td>
          <td>${task.due || "N/A"}</td>
          <td>${task.priority || "N/A"}</td>
        `;
        tbody.appendChild(tr);
      });
    };
  </script>
</head>
<body>
  <div class="sidebar">
    <button>+ New Task</button>
    <ul>
      <li><a href="#">Dashboard</a></li>
      <li><a href="#">Tasks</a></li>
      <li><a href="#">Leads</a></li>
      <li><a href="#">Inbox</a></li>
      <li><a href="#">Account</a></li>
    </ul>
  </div>
  <div class="main">
    <h1>CRM Dashboard</h1>
    <table>
      <thead>
        <tr>
          <th>#</th>
          <th>Name</th>
          <th>Status</th>
          <th>Start</th>
          <th>Due</th>
          <th>Priority</th>
        </tr>
      </thead>
      <tbody id="taskTableBody">
        <tr><td colspan="6">Loading tasks...</td></tr>
      </tbody>
    </table>
  </div>
</body>
</html>
